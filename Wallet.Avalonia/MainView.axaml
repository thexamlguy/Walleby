<UserControl
    x:Class="Wallet.Avalonia.MainView"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="using:FluentAvalonia.UI.Controls"
    xmlns:vm="using:Wallet"
    x:DataType="vm:MainViewModel">
    <NavigationView
        FooterMenuItemsSource="{Binding Footer}"
        IsSettingsVisible="False"
        MenuItemTemplate="{Binding Template}"
        MenuItemsSource="{Binding SelectedItem}"
        SelectionFollowsFocus="True">
        <Interaction.Behaviors>
            <DataTriggerBehavior Binding="{ReflectionBinding SelectedItem.IsOpened}" Value="True">
                <InvokeNavigationViewItemAction />
            </DataTriggerBehavior>
            <DataTriggerBehavior Binding="{ReflectionBinding SelectedItem.IsSelected}" Value="True">
                <InvokeNavigationViewItemAction />
            </DataTriggerBehavior>
        </Interaction.Behaviors>
        <NavigationView.PaneCustomContent>
            <Grid RowDefinitions="*,Auto">
                <ListBox
                    Grid.Row="0"
                    Margin="1,0,1,0"
                    HorizontalAlignment="Stretch"
                    ItemTemplate="{ReflectionBinding Template}"
                    ItemsSource="{Binding}"
                    SelectedItem="{Binding SelectedItem}">
                    <ListBox.Resources>
                        <StaticResource x:Key="ListViewItemBackgroundSelected" ResourceKey="SubtleFillColorTransparentBrush" />
                    </ListBox.Resources>
                    <ListBox.Styles>
                        <Style Selector="ListBoxItem">
                            <Setter Property="MinWidth" Value="0" />
                            <Setter Property="Margin" Value="2,0,2,0" />
                        </Style>
                    </ListBox.Styles>
                </ListBox>
                <NavigationViewItemSeparator Grid.Row="1" />
            </Grid>
        </NavigationView.PaneCustomContent>
        <NavigationView.Resources>
            <CornerRadius x:Key="NavigationViewContentGridCornerRadius">0</CornerRadius>
            <Thickness x:Key="NavigationViewContentGridBorderThickness">1,0,0,0</Thickness>
        </NavigationView.Resources>
        <Frame>
            <Interaction.Behaviors>
                <AttachedBehaviour>
                    <NavigateRegionAction Name="Main">
                        <NavigateAction Region="Main" Route="Wallet" />
                    </NavigateRegionAction>
                </AttachedBehaviour>
            </Interaction.Behaviors>
        </Frame>
    </NavigationView>
</UserControl>

